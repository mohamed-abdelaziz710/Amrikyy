/* =========== المتغيرات الأساسية - Tech/Space/Crypto Theme =========== */
:root {
  --neon-green: #39FF14;
  --neon-blue: #00d4ff;
  --neon-purple: #b600ff;
  --medium-gray: #888888;
  --dark-bg-primary: #0A0A0A;
  --dark-element-bg: #1C1C1C;
  --chatbot-bg: #101010;

  --glass-bg: rgba(15, 15, 15, 0.7); /* زجاجي داكن */
  --glass-border: rgba(57, 255, 20, 0.3); /* حدود زجاجية بلون النيون الأخضر */
  --glass-inner-glow: rgba(57, 255, 20, 0.1); /* توهج داخلي للزجاج */

  --text-primary: #E5E5E5; /* لون النص الأساسي (فاتح) */
  --text-secondary: #b0b0b0; /* لون نص ثانوي (أقل سطوعًا) */
  --text-on-neon: #0A0A0A; /* لون النص فوق خلفيات النيون (داكن) */
  --white: #FFFFFF;

  --font-orbitron: 'Orbitron', sans-serif; /* خط للعناوين والشعارات */
  --font-cairo: 'Cairo', sans-serif; /* خط للنصوص الأساسية */

  --transition-speed: 0.5s; /* سرعة الانتقال العامة */
  --transition-easing: ease-in-out; /* نوع الانتقال العام */
  --hover-transition-speed: 0.3s; /* سرعة الانتقال عند التحويم */
  --neon-blue-rgb: 0, 212, 255; /* RGB for neon blue for rgba() usage */
}

*, *::before, *::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  scroll-behavior: smooth; /* تمرير سلس للصفحة */
}

body {
  background: var(--dark-bg-primary);
  font-family: var(--font-cairo);
  color: var(--text-primary);
  display: flex;
  flex-direction: column;
  justify-content: center; /* توسيط المحتوى أثناء التحميل */
  align-items: center;
  overflow-x: hidden; /* منع التمرير الأفقي غير المرغوب فيه */
  overflow-y: hidden; /* منع التمرير العمودي أثناء التحميل */
  transition: background var(--transition-speed) var(--transition-easing);
}

body.loaded {
  justify-content: flex-start; /* محاذاة المحتوى للأعلى بعد التحميل */
  overflow-y: auto; /* السماح بالتمرير العمودي بعد التحميل */
}

/* =========== شاشة التحميل المحسنة مع خلفية متحركة =========== */
#loader-container {
  position: fixed;
  inset: 0; /* top, right, bottom, left = 0 */
  z-index: 10000; /* فوق كل شيء آخر */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: var(--dark-bg-primary);
  opacity: 1;
  visibility: visible;
  transition: opacity var(--transition-speed) var(--transition-easing), visibility var(--transition-speed) var(--transition-easing);
  overflow: hidden; /* منع ظهور أي أشرطة تمرير داخل شاشة التحميل */
}

/* تأثير الشبكة المتحركة لخلفية شاشة التحميل */
#loader-container::before {
    content: "";
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-image:
        linear-gradient(0deg, transparent 24px, rgba(57, 255, 20, 0.04) 25px, rgba(57, 255, 20, 0.04) 26px, transparent 27px, transparent 74px, rgba(57, 255, 20, 0.04) 75px, rgba(57, 255, 20, 0.04) 76px, transparent 77px, transparent),
        linear-gradient(90deg, transparent 24px, rgba(57, 255, 20, 0.04) 25px, rgba(57, 255, 20, 0.04) 26px, transparent 27px, transparent 74px, rgba(57, 255, 20, 0.04) 75px, rgba(57, 255, 20, 0.04) 76px, transparent 77px, transparent);
    background-size: 80px 80px;
    animation: moveGrid 25s linear infinite;
    opacity: 0.4;
    z-index: -2; /* خلف العناصر الأخرى في شاشة التحميل */
}

@keyframes moveGrid {
    0% { background-position: 0 0; }
    100% { background-position: 160px 160px; } /* تحريك الشبكة */
}

/* تأثير الجسيمات المتحركة لخلفية شاشة التحميل */
#loader-container::after {
    content: "";
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-image: radial-gradient(circle, rgba(57, 255, 20, 0.15) 1px, transparent 1.5px);
    background-size: 50px 50px;
    animation: moveParticles 40s linear infinite, particleFade 8s ease-in-out infinite alternate;
    opacity: 0; /* تبدأ مخفية وتظهر بالحركة */
    z-index: -1; /* فوق الشبكة ولكن خلف المحتوى */
}
@keyframes moveParticles {
    0% { background-position: 0 0; }
    100% { background-position: -100px 100px; } /* تحريك الجسيمات */
}
@keyframes particleFade {
    0%, 100% { opacity: 0.1; } /* تلاشي الجسيمات للداخل والخارج */
    50% { opacity: 0.4; }
}

/* إخفاء شاشة التحميل عند اكتمال التحميل */
#loader-container.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none; /* لمنع التفاعل معها وهي مخفية */
}

.loader-content {
  text-align: center;
  z-index: 1; /* فوق تأثيرات الخلفية */
}

.loader-logo {
  font-family: var(--font-orbitron);
  font-size: 2.2rem;
  line-height: 1.2;
  color: var(--neon-green);
  text-shadow: /* تأثير ظل متعدد لخلق عمق وتوهج */
    0 0 5px var(--neon-green),
    0 0 10px var(--neon-green),
    0 0 15px rgba(57, 255, 20, 0.8),
    -1px -1px 0 #000, 1px -1px 0 #000, -1px  1px 0 #000, 1px  1px 0 #000, /* حدود سوداء */
    -2px -2px 0 #000, 2px -2px 0 #000, -2px  2px 0 #000, 2px  2px 0 #000,
     0 0 3px #000;
  margin-bottom: 1.5rem;
  padding: 0 1rem; /* مساحة في حال كان النص طويلاً */
  animation: pulseLogoEnhanced 2.5s infinite alternate ease-in-out;
  white-space: normal; /* السماح بالتفاف النص إذا لزم الأمر */
  max-width: 90vw; /* لضمان عدم تجاوز الشعار عرض الشاشة */
  text-align: center;
}

/* تحريك نبضي للشعار مع تأثير ثلاثي الأبعاد خفيف */
@keyframes pulseLogoEnhanced {
  0% {
    opacity: 0.8;
    transform: scale(0.97) perspective(600px) rotateY(1deg);
    text-shadow:
      0 0 4px var(--neon-green), 0 0 8px var(--neon-green), 0 0 12px rgba(57, 255, 20, 0.7),
      -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000,
      -1.5px -1.5px 0 #000, 1.5px -1.5px 0 #000, -1.5px 1.5px 0 #000, 1.5px 1.5px 0 #000,
      0 0 2px #000;
  }
  100% {
    opacity: 1;
    transform: scale(1.03) perspective(600px) rotateY(-1deg);
    text-shadow:
      0 0 6px var(--neon-green), 0 0 12px var(--neon-green), 0 0 20px rgba(57, 255, 20, 0.9), 0 0 30px rgba(57, 255, 20, 0.6),
      -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000,
      -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000,
      0 0 4px #000;
  }
}

.loader-message {
  font-family: var(--font-cairo);
  font-size: 1.1rem;
  color: var(--text-secondary);
  margin-bottom: 1.5rem;
}

.progress-bar-container {
  width: 250px;
  height: 8px;
  background-color: var(--dark-element-bg);
  border-radius: 4px;
  overflow: hidden; /* لإخفاء الجزء الزائد من شريط التقدم */
  margin: 0 auto; /* توسيط الحاوية */
  box-shadow: 0 0 10px rgba(0,0,0,0.5); /* ظل خفيف */
  border: 1px solid rgba(57, 255, 20, 0.2); /* حدود بلون النيون */
}

.progress-bar {
  width: 0%; /* يبدأ فارغًا، ويتم ملؤه بواسطة JavaScript و CSS transition */
  height: 100%;
  background: var(--neon-green);
  border-radius: 4px; /* نفس تقويس الحاوية */
  transition: width 2.5s cubic-bezier(0.25, 1, 0.5, 1); /* انتقال سلس لملء الشريط */
}

/* =========== المحتوى الرئيسي =========== */
#main-content {
  width: 100%;
  padding: 2rem 1rem; /* مساحات داخلية للمحتوى */
  opacity: 0; /* يبدأ مخفيًا */
  transform: translateY(30px); /* يبدأ مزاحًا للأسفل قليلاً */
  transition: opacity var(--transition-speed) var(--transition-easing) 0.3s, transform var(--transition-speed) var(--transition-easing) 0.3s; /* انتقال سلس للظهور */
}

body.loaded #main-content {
  opacity: 1; /* يظهر عند اكتمال التحميل */
  transform: translateY(0); /* يعود إلى مكانه الأصلي */
}

/* زر تبديل اللغة */
#lang-toggle-container {
    position: absolute; /* تموضع مطلق بالنسبة لأقرب عنصر له تموضع نسبي (أو الجسم) */
    top: 1.5rem;
    left: 1.5rem; /* الافتراضي للغة العربية (RTL) */
    z-index: 100; /* فوق المحتوى الآخر */
}
html[dir="ltr"] #lang-toggle-container { /* تعديل للغة الإنجليزية (LTR) */
    left: auto;
    right: 1.5rem;
}

.lang-toggle-btn {
    background-color: var(--dark-element-bg);
    color: var(--neon-green);
    border: 1px solid var(--neon-green);
    padding: 0.5rem 1rem;
    font-family: var(--font-orbitron);
    font-size: 0.8rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color var(--hover-transition-speed), color var(--hover-transition-speed), box-shadow var(--hover-transition-speed);
    box-shadow: 0 0 8px rgba(57, 255, 20, 0.4); /* ظل خفيف بلون النيون */
}
.lang-toggle-btn:hover {
    background-color: var(--neon-green);
    color: var(--text-on-neon);
    box-shadow: 0 0 15px var(--neon-green); /* ظل أقوى عند التحويم */
}


/* =========== بطاقة الـ CV الذكية =========== */
.smart-cv-card-container {
  position: relative; /* تموضع نسبي للسماح بتحديد موقع العناصر المطلقة داخله إذا لزم الأمر */
  z-index: 10; /* فوق الخلفية المتحركة */
  width: 100%;
  max-width: 600px; /* أقصى عرض للبطاقة */
  margin: 40px auto; /* توسيط البطاقة مع هوامش علوية وسفلية */
  padding: 0 20px; /* مساحات داخلية للحاوية نفسها (للاستجابة) */
  display: flex;
  justify-content: center; /* توسيط البطاقة داخل الحاوية إذا كانت الحاوية أوسع */
}

.smart-cv-card {
  background: var(--dark-element-bg); /* خلفية البطاقة */
  border: 1px solid var(--glass-border); /* حدود زجاجية */
  border-radius: 15px; /* زوايا دائرية */
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6), 0 0 20px rgba(57, 255, 20, 0.4); /* ظل متعدد الأبعاد */
  padding: 30px; /* مساحات داخلية للبطاقة */
  display: flex;
  flex-direction: column; /* ترتيب العناصر بشكل عمودي */
  gap: 25px; /* مسافة بين الأقسام الرئيسية داخل البطاقة */
  width: 100%; /* البطاقة تأخذ عرض الحاوية بالكامل */
}

/* استجابة البطاقة للشاشات المختلفة */
@media (max-width: 768px) { /* للأجهزة اللوحية والشاشات الأصغر */
  .smart-cv-card-container {
    margin: 20px auto; /* تقليل الهوامش */
    padding: 0 10px; /* تقليل المساحات الداخلية للحاوية */
  }
  .smart-cv-card {
    padding: 20px; /* تقليل المساحات الداخلية للبطاقة */
    gap: 20px; /* تقليل المسافة بين الأقسام */
  }
}

@media (max-width: 600px) { /* للهواتف المحمولة */
  .smart-cv-card-container {
    padding: 0 1vw; /* مساحات داخلية قليلة جدًا */
    margin: 10px auto; /* هوامش أقل */
  }
  .smart-cv-card {
    padding: 15px;
    border-radius: 14px;
  }
  .cv-header { /* تغيير تخطيط رأس البطاقة للهواتف */
    flex-direction: column; /* ترتيب الصورة والمعلومات بشكل عمودي */
    text-align: center; /* توسيط النصوص */
    gap: 1rem; /* مسافة بين الصورة والمعلومات */
  }
  .cv-avatar {
    width: 70px; /* تصغير الصورة الشخصية */
    height: 70px;
  }
  .cv-header-info h2 {
    font-size: 1.4rem; /* تصغير حجم الاسم */
  }
  .cv-header-info p.role {
    font-size: 0.9rem; /* تصغير حجم الدور الوظيفي */
  }
}

/* رأس البطاقة (الاسم والصورة والروابط) */
.cv-header {
  display: flex;
  align-items: center; /* محاذاة العناصر رأسيًا */
  gap: 20px; /* مسافة بين الصورة والمعلومات */
  padding-bottom: 20px; /* مسافة سفلية قبل الخط الفاصل */
  border-bottom: 1px solid rgba(57, 255, 20, 0.1); /* خط فاصل خفيف */
}

.cv-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%; /* صورة دائرية */
  object-fit: cover; /* لضمان ملاءمة الصورة دون تشويه */
  border: 3px solid var(--neon-green); /* حدود بلون النيون */
  box-shadow: 0 0 15px var(--neon-green); /* توهج حول الصورة */
  flex-shrink: 0; /* منع الصورة من التقلص إذا كان النص طويلاً */
}

.cv-header-info {
  flex-grow: 1; /* السماح لمعلومات الرأس بأخذ المساحة المتبقية */
}

.cv-header-info h2 { /* الاسم */
  font-family: var(--font-orbitron);
  font-size: 1.8rem;
  color: var(--neon-green);
  margin-bottom: 5px;
  text-shadow: 0 0 10px var(--neon-green); /* توهج للاسم */
}

.cv-header-info p.role { /* الدور الوظيفي */
  font-size: 1rem;
  color: var(--medium-gray);
  line-height: 1.4; /* ارتفاع سطر مناسب */
}

.cv-social-links { /* روابط التواصل الاجتماعي */
  margin-top: 15px;
  display: flex;
  gap: 15px; /* مسافة بين الأيقونات */
}
/* توسيط روابط التواصل الاجتماعي في عرض الهاتف عندما يكون رأس البطاقة في المنتصف */
html[dir="rtl"] .cv-header.text-center .cv-social-links,
html[dir="ltr"] .cv-header.text-center .cv-social-links {
    justify-content: center;
}

.cv-social-links a { /* أيقونات التواصل */
  color: var(--text-primary);
  font-size: 1.4rem;
  transition: color 0.3s ease, transform 0.3s ease; /* انتقال سلس عند التحويم */
}

.cv-social-links a:hover {
  color: var(--neon-green); /* تغيير اللون عند التحويم */
  transform: scale(1.1); /* تكبير طفيف عند التحويم */
}

/* الأقسام المختلفة داخل البطاقة (الملخص، التعليم، المهارات، إلخ) */
.cv-section {
  padding-bottom: 25px;
  border-bottom: 1px dashed rgba(57, 255, 20, 0.08); /* خط فاصل منقط وخفيف بين الأقسام */
}

.cv-section:last-child { /* إزالة الخط الفاصل من القسم الأخير */
  border-bottom: none;
  padding-bottom: 0;
}

.cv-section h3 { /* عناوين الأقسام */
  font-family: var(--font-orbitron);
  font-size: 1.5rem;
  color: var(--neon-green);
  margin-bottom: 15px;
  text-shadow: 0 0 8px var(--neon-green); /* توهج للعناوين */
}

.cv-section p { /* الفقرات العامة داخل الأقسام */
  font-size: 1rem;
  line-height: 1.6;
  color: var(--text-primary);
}

/* قسم المهارات */
.skills-category {
  margin-top: 20px; /* مسافة علوية قبل كل فئة مهارات */
}

.skills-category h4 { /* عناوين فئات المهارات (مثل الأمن السيبراني) */
  font-family: var(--font-cairo); /* استخدام خط القاهرة هنا */
  font-size: 1.1rem;
  color: var(--neon-green);
  margin-bottom: 10px;
  display: flex; /* لمحاذاة الأيقونة مع النص */
  align-items: center;
  gap: 8px; /* مسافة بين الأيقونة والنص */
}
.skills-category h4 i { /* أيقونات فئات المهارات */
  color: var(--neon-green);
  width: 20px; /* عرض ثابت للأيقونة */
  text-align: center; /* توسيط الأيقونة إذا كانت أصغر من العرض */
}

.skills-list { /* قائمة المهارات */
  list-style: none; /* إزالة نقاط القائمة الافتراضية */
  padding: 0;
  display: flex;
  flex-wrap: wrap; /* السماح بالتفاف المهارات إلى أسطر جديدة */
  gap: 10px; /* مسافة بين عناصر المهارات */
}

.skills-list li { /* كل عنصر مهارة */
  background-color: rgba(57, 255, 20, 0.1); /* خلفية شفافة بلون النيون */
  color: var(--text-primary);
  padding: 8px 15px; /* مساحات داخلية للمهارة */
  border-radius: 20px; /* زوايا دائرية للمهارة */
  font-size: 0.9rem;
  border: 1px solid rgba(57, 255, 20, 0.3); /* حدود شفافة بلون النيون */
}
.skills-list li span { /* لضمان أن النص داخل span يظهر بشكل صحيح */
    display: inline-block;
}

/* عناصر التعليم والمشاريع */
.education-item, .project-item {
  margin-bottom: 20px;
  padding-bottom: 20px;
  border-bottom: 1px dotted rgba(57, 255, 20, 0.05); /* خط فاصل منقط وخفيف جدًا */
}

.education-item:last-child, .project-item:last-child { /* إزالة الخط من العنصر الأخير */
  border-bottom: none;
  padding-bottom: 0;
}

.education-item p, .project-item p { /* عناوين عناصر التعليم والمشاريع */
  font-weight: bold;
  color: var(--neon-green);
  margin-bottom: 5px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.education-item p i, .project-item p i { /* أيقونات عناصر التعليم والمشاريع */
    color: var(--neon-green);
    width: 20px;
    text-align: center;
}

.education-item span, .project-item span { /* تفاصيل عناصر التعليم والمشاريع */
  display: block; /* كل تفصيل في سطر جديد */
  font-size: 0.9rem;
  color: var(--medium-gray);
  margin-left: 28px; /* إزاحة لليمين (يفترض LTR، يتم التعامل مع RTL بواسطة اتجاه HTML) */
}
html[dir="rtl"] .education-item span, html[dir="rtl"] .project-item span { /* تعديل الإزاحة لـ RTL */
    margin-left: 0;
    margin-right: 28px;
}

.project-item a { /* روابط المشاريع (عرض مباشر، المستودع) */
  color: var(--neon-green);
  text-decoration: none; /* إزالة الخط السفلي الافتراضي */
  margin: 0 5px; /* هوامش أفقية للروابط */
  font-size: 0.95rem;
  transition: color 0.3s ease;
  display: inline-flex; /* لمحاذاة الأيقونة مع نص الرابط */
  align-items: center;
  gap: 5px; /* مسافة بين أيقونة الرابط والنص */
}
.project-item a i { /* أيقونات روابط المشاريع */
    color: var(--neon-green); /* ضمان تطابق لون الأيقونة مع الرابط */
}

.project-item a:hover {
  color: var(--text-primary); /* تغيير اللون عند التحويم */
  text-decoration: underline; /* إضافة خط سفلي عند التحويم */
}
.project-item a:hover i { /* تغيير لون أيقونة الرابط عند التحويم أيضًا */
    color: var(--text-primary);
}

/* قسم الإجراءات (مثل زر تحميل السيرة الذاتية) */
.cv-actions {
  margin-top: 30px;
  text-align: center; /* توسيط محتويات القسم */
}

.cv-download-btn { /* زر تحميل السيرة الذاتية */
  display: inline-block; /* للسماح بتطبيق الهوامش والمساحات الداخلية */
  background-color: var(--neon-green);
  color: var(--text-on-neon);
  border: none;
  padding: 12px 25px;
  font-family: var(--font-orbitron);
  font-size: 1rem;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
  box-shadow: 0 0 10px rgba(57, 255, 20, 0.6);
  text-decoration: none; /* إزالة الخط السفلي إذا كان الرابط < a > */
}

.cv-download-btn:hover {
  background-color: #2de20f; /* لون أخضر أفتح قليلاً عند التحويم */
  box-shadow: 0 0 15px var(--neon-green), 0 0 25px rgba(57, 255, 20, 0.4);
  transform: translateY(-2px); /* تأثير رفع خفيف عند التحويم */
}

/* =========== Chatbot Styles =========== */
#chatbot-toggle-btn { /* زر فتح/إغلاق الشات بوت */
    position: fixed; /* تموضع ثابت بالنسبة لنافذة العرض */
    bottom: 2rem;
    right: 2rem; /* الافتراضي لـ LTR */
    background-color: var(--neon-green);
    color: var(--text-on-neon);
    border: none;
    width: 60px;
    height: 60px;
    border-radius: 50%; /* زر دائري */
    font-size: 1.8rem; /* حجم الأيقونة */
    display: flex; /* لتوسيط الأيقونة داخل الزر */
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(57, 255, 20, 0.4), 0 0 0 0 rgba(57, 255, 20, 0.7); /* ظل متعدد وتأثير نبض أولي */
    animation: chatbotNeonPulse 1.7s infinite alternate; /* تحريك نبضي للزر */
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
    z-index: 999; /* فوق معظم العناصر الأخرى */
}
html[dir="rtl"] #chatbot-toggle-btn { /* تعديل لـ RTL */
    right: auto;
    left: 2rem;
}
#chatbot-toggle-btn:hover {
    transform: scale(1.1) rotate(5deg); /* تكبير ودوران خفيف عند التحويم */
    box-shadow: 0 8px 25px rgba(57, 255, 20, 0.6);
    background-color: #30f00f; /* لون أخضر أفتح */
}
#chatbot-toggle-btn i { /* أيقونة الشات بوت */
    transition: transform 0.3s ease;
}
#chatbot-toggle-btn:hover i {
    transform: scale(1.1); /* تكبير الأيقونة عند التحويم على الزر */
}

/* تحريك نبضي لظل زر الشات بوت */
@keyframes chatbotNeonPulse {
  0% {
    box-shadow: 0 5px 15px rgba(57, 255, 20, 0.4), 0 0 0 0 rgba(57, 255, 20, 0.7);
    filter: brightness(1);
  }
  70% {
    box-shadow: 0 8px 30px rgba(57, 255, 20, 0.5), 0 0 0 8px rgba(57, 255, 20, 0.5);
    filter: brightness(1.15); /* زيادة سطوع الزر */
  }
  100% {
    box-shadow: 0 12px 40px rgba(57, 255, 20, 0.6), 0 0 0 16px rgba(57, 255, 20, 0.3);
    filter: brightness(1.25);
  }
}

#chatbot-container { /* حاوية الشات بوت الرئيسية */
    position: fixed;
    bottom: 90px; /* فوق زر التبديل */
    right: 2rem; /* الافتراضي لـ LTR */
    width: 350px; /* عرض الشات بوت */
    max-width: 90vw; /* أقصى عرض للشاشات الصغيرة */
    height: 450px; /* ارتفاع الشات بوت */
    max-height: 70vh; /* أقصى ارتفاع بالنسبة لنافذة العرض */
    background-color: var(--chatbot-bg); /* خلفية داكنة للشات بوت */
    border: 1.5px solid var(--neon-green); /* حدود بلون النيون */
    border-radius: 15px;
    box-shadow: 0 10px 40px 0 rgba(57, 255, 20, 0.8), 0 0 0 2px rgba(57, 255, 20, 0.26); /* ظل قوي */
    backdrop-filter: blur(14px); /* تأثير زجاجي للخلفية (إذا كانت الخلفية شفافة جزئيًا) */
    -webkit-backdrop-filter: blur(14px);
    display: none; /* يبدأ مخفيًا، ويتم التحكم به بواسطة JavaScript (.visible) */
    flex-direction: column; /* ترتيب العناصر الداخلية بشكل عمودي */
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px) scale(0.95); /* تأثير ظهور من الأسفل مع تكبير */
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
    z-index: 998; /* تحت زر التبديل إذا كانا متداخلين */
}
html[dir="rtl"] #chatbot-container { /* تعديل لـ RTL */
    right: auto;
    left: 2rem;
}

#chatbot-container.visible { /* كلاس يتم إضافته بواسطة JavaScript لإظهار الشات بوت */
    display: flex; /* مهم لإظهار المحتوى المرن */
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
}

.chatbot-header { /* رأس الشات بوت (العنوان وزر الإغلاق) */
    padding: 0.8rem 1rem;
    background-color: rgba(57, 255, 20, 0.1); /* خلفية شفافة بلون النيون */
    border-bottom: 1px solid var(--glass-border); /* خط فاصل زجاجي */
    display: flex;
    justify-content: space-between; /* توزيع العنوان وزر الإغلاق على الأطراف */
    align-items: center;
    flex-shrink: 0; /* منع الرأس من التقلص */
}
.chatbot-header h4 { /* عنوان الشات بوت */
    font-family: var(--font-orbitron);
    color: var(--neon-green);
    font-size: 1rem;
    margin: 0; /* إزالة الهوامش الافتراضية */
}
.chatbot-close-btn { /* زر إغلاق الشات بوت */
    background: none;
    border: none;
    color: var(--medium-gray);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px; /* لتسهيل النقر */
    transition: color 0.3s;
}
.chatbot-close-btn:hover {
    color: var(--neon-green); /* تغيير اللون عند التحويم */
}

#chatbot-messages { /* حاوية رسائل الشات */
    flex-grow: 1; /* تأخذ المساحة المتبقية في الشات بوت */
    padding: 1rem;
    overflow-y: auto; /* السماح بالتمرير العمودي للرسائل */
    display: flex;
    flex-direction: column; /* ترتيب الرسائل بشكل عمودي */
    gap: 0.75rem; /* مسافة بين الرسائل */
    scrollbar-width: thin; /* شريط تمرير نحيف (Firefox) */
    scrollbar-color: var(--neon-green) var(--dark-element-bg); /* ألوان شريط التمرير (Firefox) */
}
#chatbot-messages::-webkit-scrollbar { /* شريط التمرير (Chrome, Safari, Edge) */
  width: 7px;
}
#chatbot-messages::-webkit-scrollbar-track { /* مسار شريط التمرير */
  background: var(--dark-element-bg);
}
#chatbot-messages::-webkit-scrollbar-thumb { /* مقبض شريط التمرير */
  background: var(--neon-green);
  border-radius: 8px;
}

.chat-message { /* كل رسالة في الشات */
    padding: 0.6rem 1rem;
    border-radius: 10px; /* زوايا دائرية للرسائل */
    max-width: 80%; /* أقصى عرض للرسالة لتجنب ملء الشاشة */
    line-height: 1.5;
    font-size: 0.9rem;
    word-break: break-word; /* التفاف الكلمات الطويلة */
    transition: background 0.2s, color 0.2s, box-shadow 0.2s; /* انتقال سلس للتغييرات */
}
.user-message { /* رسائل المستخدم */
    background-color: var(--neon-green);
    color: var(--text-on-neon);
    align-self: flex-end; /* محاذاة لليمين (LTR) */
    border-bottom-right-radius: 0; /* شكل مميز لزاوية الرسالة */
    box-shadow: 0 2px 8px rgba(57, 255, 20, 0.25); /* ظل خفيف */
}
html[dir="rtl"] .user-message { /* تعديل لـ RTL */
    align-self: flex-start; /* محاذاة لليسار */
    border-bottom-right-radius: 10px;
    border-bottom-left-radius: 0;
}
.ai-message { /* رسائل الذكاء الاصطناعي */
    background-color: var(--dark-element-bg);
    color: var(--text-primary);
    align-self: flex-start; /* محاذاة لليسار (LTR) */
    border-bottom-left-radius: 0; /* شكل مميز لزاوية الرسالة */
    box-shadow: 0 2px 8px rgba(0, 212, 255, 0.25); /* ظل خفيف بلون مختلف */
}
 html[dir="rtl"] .ai-message { /* تعديل لـ RTL */
    align-self: flex-end; /* محاذاة لليمين */
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 0;
}
.error-message { /* رسائل الخطأ */
    background-color: rgba(255, 57, 57, 0.2); /* خلفية حمراء شفافة */
    color: #ff8f8f; /* لون نص فاتح للتباين */
    border: 1px solid rgba(255, 57, 57, 0.5); /* حدود حمراء */
    align-self: center; /* توسيط رسائل الخطأ */
    font-size: 0.85rem;
    width: 90%; /* عرض أوسع قليلاً لرسائل الخطأ */
    text-align: center; /* توسيط النص داخل رسالة الخطأ */
}

.chatbot-input-area { /* منطقة إدخال الرسائل */
    display: flex;
    padding: 0.75rem;
    border-top: 1px solid var(--glass-border); /* خط فاصل زجاجي */
    background-color: rgba(10,10,10, 0.5); /* خلفية شفافة قليلاً */
    flex-shrink: 0; /* منع منطقة الإدخال من التقلص */
}
#chatbot-input { /* حقل إدخال النص */
    flex-grow: 1; /* يأخذ المساحة المتبقية */
    padding: 0.6rem 0.8rem;
    border: 1.5px solid var(--neon-green);
    background-color: #181818; /* خلفية داكنة لحقل الإدخال */
    color: var(--text-primary);
    border-radius: 8px;
    font-family: var(--font-cairo);
    margin-right: 0.5rem; /* الافتراضي لـ LTR */
    min-height: 38px; /* ارتفاع أدنى */
    resize: none; /* منع تغيير الحجم يدويًا */
    font-size: 1rem; /* حجم خط مناسب */
    box-shadow: 0 0 8px rgba(57, 255, 20, 0.13); /* ظل خفيف */
    transition: border-color 0.3s, box-shadow 0.3s; /* انتقال سلس عند التركيز */
}
html[dir="rtl"] #chatbot-input { /* تعديل لـ RTL */
    margin-right: 0;
    margin-left: 0.5rem;
}
#chatbot-input:focus { /* عند التركيز على حقل الإدخال */
    outline: none; /* إزالة الحدود الافتراضية للتركيز */
    border-color: var(--neon-blue); /* تغيير لون الحدود إلى الأزرق النيون */
    box-shadow: 0 0 12px rgba(0, 212, 255, 0.6); /* ظل أزرق أقوى */
}
#chatbot-send-btn { /* زر إرسال الرسالة */
    background: linear-gradient(90deg, var(--neon-green) 60%, var(--neon-blue) 100%); /* تدرج لوني للزر */
    color: var(--text-on-neon); /* ضمان تباين النص */
    border: none;
    padding: 0.6rem 1.2rem; /* زيادة المساحة الداخلية للزر */
    border-radius: 8px;
    font-family: var(--font-orbitron);
    font-weight: bold; /* نص أعرض */
    letter-spacing: 1px; /* تباعد بين الأحرف */
    cursor: pointer;
    transition: background 0.3s, transform 0.2s, box-shadow 0.3s;
    box-shadow: 0 0 8px rgba(57, 255, 20, 0.25); /* ظل خفيف */
}
#chatbot-send-btn:hover {
    background: linear-gradient(90deg, #2de20f 60%, #00c0ef 100%); /* تدرج أفتح عند التحويم */
    transform: scale(1.05); /* تكبير طفيف */
    box-shadow: 0 0 12px rgba(57, 255, 20, 0.4); /* ظل أقوى */
}
#chatbot-send-btn:active { /* عند النقر على الزر */
  background: var(--neon-blue); /* تغيير الخلفية للتأكيد البصري */
  color: #fff;
  transform: scale(1); /* إعادة الحجم الأصلي */
}

/* مؤشر الكتابة (النقاط المتحركة) */
.typing-indicator {
  display: flex;
  align-items: center;
  gap: 4px; /* مسافة بين النقاط */
  min-height: 24px; /* ضمان أن المؤشر يأخذ مساحة كافية */
  margin: 2px 0; /* هوامش رأسية متناسقة */
}
.typing-indicator .dot { /* كل نقطة في المؤشر */
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--neon-green);
  opacity: 0.7; /* تبدأ شفافة قليلاً */
  animation: typingBlink 1.2s infinite both; /* تحريك وميض للنقاط */
}
.typing-indicator .dot:nth-child(2) { animation-delay: 0.2s; } /* تأخير للنقطة الثانية */
.typing-indicator .dot:nth-child(3) { animation-delay: 0.4s; } /* تأخير للنقطة الثالثة */

@keyframes typingBlink { /* تحريك وميض النقاط */
  0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); } /* تصغير وتعتيم */
  40% { opacity: 1; transform: scale(1); } /* تكبير وإظهار كامل */
}


/* =========== استجابة الشاشات الصغيرة =========== */
@media (max-width: 768px) { /* للأجهزة اللوحية والهواتف الكبيرة */
  .loader-logo {
    font-size: 1.8rem;
    line-height: 1.3;
  }
  .progress-bar-container { width: 200px; }

  #lang-toggle-container {
    top: 1rem;
    left: 1rem;
  }
  html[dir="ltr"] #lang-toggle-container {
    left: auto;
    right: 1rem;
  }
  .lang-toggle-btn {
    padding: 0.4rem 0.8rem;
    font-size: 0.7rem;
  }
  .smart-cv-card {
    padding: 1.5rem;
    padding-top: 3.5rem; /* مساحة لزر تبديل اللغة إذا تداخل */
    margin: 1rem auto;
    max-width: 95vw; /* عرض أقصى أكبر قليلاً للشاشات المتوسطة */
  }

  .cv-header { flex-direction: column; text-align: center; gap: 1rem;}
  .cv-header.text-center .cv-social-links { /* ضمان توسيط روابط التواصل في عرض الهاتف */
      justify-content: center;
  }
  .cv-avatar { width: 80px; height: 80px; }
  .cv-header-info h2 { font-size: 1.6rem; }
  .cv-header-info p.role { font-size: 0.9rem; }
  .cv-social-links a { font-size: 1.2rem; margin: 0 0.5rem; }
  .cv-section h3 { font-size: 1.3rem; letter-spacing: 0.5px; }
  .cv-section p, .education-item p, .project-item p { font-size: 0.9rem; }
  .education-item span, .project-item span { font-size: 0.8rem; }

  .skills-list { gap: 0.6rem; }
  .skills-list li { font-size: 0.85rem; padding: 0.5rem 0.9rem;}
  .cv-download-btn { font-size: 0.9rem; padding: 0.8rem 1.6rem; width: 100%; letter-spacing: 1px;}

  #chatbot-toggle-btn { /* تصغير زر الشات بوت */
    bottom: 1rem;
    right: 1rem;
    width: 50px;
    height: 50px;
    font-size: 1.5rem;
  }
  html[dir="rtl"] #chatbot-toggle-btn {
    right: auto;
    left: 1rem;
  }
  #chatbot-container { /* تعديل أبعاد الشات بوت للشاشات المتوسطة */
    bottom: 70px; /* فوق زر التبديل المصغر */
    right: 1rem;
    width: calc(100vw - 2rem); /* عرض كامل مع هوامش */
    height: calc(100vh - 80px - 1rem); /* ارتفاع كامل مع هوامش ومساحة لزر التبديل */
    max-height: none; /* إلغاء الارتفاع الأقصى السابق */
  }
  html[dir="rtl"] #chatbot-container {
    right: auto;
    left: 1rem;
  }
}
 @media (max-width: 480px) { /* للهواتف الصغيرة جدًا */
    .loader-logo {
        font-size: 1.6rem;
        letter-spacing: 0.5px;
    }
     .cv-header-info h2 { font-size: 1.4rem; }
     .cv-section h3 { font-size: 1.2rem; }
}

/* --- تحسينات الشات بوت للشاشات الصغيرة (ملء الشاشة أقل من 600 بكسل) --- */
@media (max-width: 600px) {
  #chatbot-container.visible { /* تطبيق فقط عندما يكون الشات بوت مرئيًا */
    position: fixed !important; /* ضمان التموضع الثابت فوق كل شيء */
    left: 0 !important; right: 0 !important; bottom: 0 !important; top: 0 !important; /* ملء الشاشة */
    width: 100vw !important; height: 100vh !important;
    max-width: 100vw !important; max-height: 100vh !important;
    border-radius: 0 !important; /* إزالة تقويس الزوايا */
    margin: 0 !important; /* إزالة الهوامش */
    box-shadow: none !important; /* إزالة الظل */
    z-index: 9999; /* فوق كل شيء باستثناء زر التبديل إذا كان مرئيًا */
    padding: 0 !important; /* إزالة المساحات الداخلية */
    background: linear-gradient(135deg, #0A0A0A 0%, #1C1C1C 100%) !important; /* خلفية داكنة لملء الشاشة */
    display: flex !important; /* ضمان التخطيط المرن */
    flex-direction: column;
    justify-content: space-between; /* توزيع المساحة بين الرأس والرسائل ومنطقة الإدخال */
  }
  .chatbot-header { /* تعديل رأس الشات بوت في وضع ملء الشاشة */
    font-size: 1.1rem !important;
    padding: 1rem !important;
    min-height: 56px; /* ارتفاع أدنى للرأس */
    background-color: rgba(0,0,0,0.3); /* خلفية شفافة قليلاً للرأس */
  }
  .chatbot-close-btn { /* تعديل زر الإغلاق */
    width: 36px !important;
    height: 36px !important;
    font-size: 1.3rem !important;
    border-radius: 50%;
    background: rgba(0,0,0,0.2);
    color: var(--neon-blue); /* استخدام الأزرق النيون لزر الإغلاق */
    display: flex; /* لتوسيط الأيقونة */
    align-items: center;
    justify-content: center;
  }
  #chatbot-messages { /* تعديل منطقة الرسائل */
    flex: 1 1 auto; /* السماح لمنطقة الرسائل بأخذ المساحة المتاحة */
    padding: 0.7rem !important; /* مساحات داخلية متناسقة */
    font-size: 1rem !important; /* حجم خط مناسب للقراءة */
    overscroll-behavior: contain; /* منع مشاكل السحب للتحديث في المتصفحات المحمولة */
  }
  .chatbot-input-area { /* تعديل منطقة الإدخال */
    padding: 0.7rem !important;
    gap: 0.5rem;
    background-color: rgba(0,0,0,0.2); /* خلفية شفافة قليلاً */
    border-top: 1px solid rgba(var(--neon-blue-rgb), 0.2); /* خط فاصل علوي بلون أزرق نيون */
  }
  #chatbot-input { /* تعديل حقل الإدخال */
    font-size: 1rem !important;
    min-height: 44px !important;
    max-height: 120px !important; /* السماح بتوسيع الحقل لعدة أسطر */
    padding: 0.7rem 1rem !important;
    border-radius: 22px !important; /* زوايا دائرية أكثر */
    background: rgba(10, 10, 10, 0.95); /* خلفية داكنة جدًا */
    color: #fff;
    box-shadow: 0 0 8px rgba(var(--neon-blue-rgb), 0.26); /* ظل أزرق خفيف */
    border: 1.5px solid var(--neon-blue); /* حدود بلون أزرق نيون */
  }
  #chatbot-send-btn { /* تعديل زر الإرسال */
    min-width: 44px !important; /* حجم أدنى للزر */
    min-height: 44px !important;
    font-size: 1.3rem !important; /* حجم أيقونة مناسب */
    border-radius: 50% !important; /* زر دائري */
    background: linear-gradient(135deg, var(--neon-blue) 0%, var(--neon-purple) 100%) !important; /* تدرج لوني مختلف */
    color: #fff !important;
    box-shadow: 0 0 12px rgba(var(--neon-blue-rgb), 0.6); /* ظل أزرق أقوى */
    display: flex; /* لتوسيط الأيقونة */
    align-items: center;
    justify-content: center;
  }
  #chatbot-send-btn:active { /* عند النقر على زر الإرسال */
    background: linear-gradient(135deg, var(--neon-purple) 0%, var(--neon-blue) 100%) !important; /* عكس التدرج */
    box-shadow: 0 0 18px rgba(var(--neon-blue-rgb), 0.73); /* ظل أقوى */
  }
  .chat-message { /* تعديل الرسائل في وضع ملء الشاشة */
    font-size: 1rem !important;
    padding: 0.7rem 1rem !important;
    margin-bottom: 0.5rem !important;
    border-radius: 1.2rem !important; /* زوايا دائرية أكثر */
  }
  .typing-indicator { /* تعديل مؤشر الكتابة */
    min-height: 32px;
    padding: 0.7rem 1rem !important;
  }
}

/* ضمان ظهور زر تبديل الشات بوت دائمًا في وضع الهاتف، حتى فوق الشات بوت المفتوح بملء الشاشة */
@media (max-width: 600px) {
  #chatbot-toggle-btn {
    position: fixed !important; /* ضمان التموضع الثابت */
    bottom: 1.2rem !important;
    right: 1.2rem !important; /* الافتراضي لـ LTR */
    z-index: 10002 !important; /* فوق الشات بوت الذي بملء الشاشة */
    width: 56px !important;
    height: 56px !important;
    border-radius: 50% !important;
    font-size: 2.1rem !important; /* أيقونة أكبر */
    box-shadow: 0 0 16px rgba(var(--neon-blue-rgb), 0.6); /* ظل أزرق */
    background: linear-gradient(135deg, var(--neon-blue) 0%, var(--neon-purple) 100%) !important; /* نفس تدرج زر الإرسال */
    color: #fff !important;
  }
  html[dir="rtl"] #chatbot-toggle-btn { /* تعديل لـ RTL */
    right: auto !important;
    left: 1.2rem !important;
  }
  #chatbot-toggle-btn:active { /* عند النقر على زر التبديل */
    background: linear-gradient(135deg, var(--neon-purple) 0%, var(--neon-blue) 100%) !important; /* عكس التدرج */
    box-shadow: 0 0 24px rgba(var(--neon-blue-rgb), 0.73); /* ظل أقوى */
  }
}

/* =========== قسم المعلومات الشخصية =========== */
.personal-info-section {
  background: rgba(20, 20, 30, 0.7); /* خلفية داكنة شفافة قليلاً */
  border-radius: 12px;
  margin: 18px 0 10px 0; /* هوامش مناسبة */
  padding: 14px 18px 10px 18px; /* مساحات داخلية */
  box-shadow: 0 0 12px 2px var(--neon-blue), 0 0 2px 1px var(--neon-blue) inset; /* ظل وتوهج داخلي بلون أزرق نيون */
}
.personal-info-section h4 { /* عنوان قسم المعلومات الشخصية */
  color: var(--neon-blue);
  font-size: 1.1em;
  margin-bottom: 8px;
  letter-spacing: 1px; /* تباعد بين الأحرف */
  text-shadow: 0 0 6px var(--neon-blue), 0 0 2px #000; /* توهج وظل خفيف */
}
.personal-info-list { /* قائمة المعلومات الشخصية */
  list-style: none;
  padding: 0;
  margin: 0;
}
.personal-info-list li { /* كل عنصر في القائمة */
  color: var(--text-primary);
  font-size: 1em;
  margin-bottom: 5px; /* مسافة بين العناصر */
  display: flex; /* لمحاذاة الأيقونة مع النص */
  align-items: center;
  gap: 8px; /* مسافة بين الأيقونة والنص */
  text-shadow: 0 0 2px var(--neon-blue), 0 0 1px #000; /* توهج خفيف للنص */
}
.personal-info-list li i { /* أيقونات المعلومات الشخصية */
  color: var(--neon-blue);
  text-shadow: 0 0 6px var(--neon-blue), 0 0 2px #000;
  width: 20px; /* عرض ثابت للأيقونة */
  text-align: center; /* توسيط الأيقونة */
}
.personal-info-list li strong { /* تسميات المعلومات (مثل "تاريخ الميلاد:") */
    color: var(--text-primary); /* لون أساسي أو أفتح قليلاً إذا لزم الأمر */
    font-weight: bold;
}
.personal-info-list li span { /* قيم المعلومات (مثل "10 يوليو 1999") */
    color: var(--medium-gray); /* لون أهدأ للقيم */
}

@media (max-width: 600px) { /* تعديلات قسم المعلومات الشخصية للشاشات الصغيرة */
  .personal-info-section {
    padding: 10px 12px 8px 12px; /* تقليل المساحات الداخلية */
  }
  .personal-info-list li {
    font-size: 0.95em; /* تصغير حجم الخط قليلاً */
  }
}
